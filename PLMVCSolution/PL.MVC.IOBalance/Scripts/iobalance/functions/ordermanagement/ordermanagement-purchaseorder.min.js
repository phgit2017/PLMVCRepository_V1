var ORDERMANAGEMENTPURCHASEORDER=function(){var n={params:null,loaderMsg:"Please wait while we process your request",UpdateMsg:"",gvProductHeight:180,defaultCRType:"",defaultValue:null,defaultEditValue:null,defaultSearchValue:null,defaultVoidQtyProduct:null},r=function(n){$("body").showLoader({type:"page",message:n})},t=function(){$("body").hideLoader()},e=function(){$("body").on("click","#newbutton",function(){p();f();n.params.inventoryAction="save"});$("body").on("click","#discardbutton",function(){u();n.params.inventoryAction=""});$("body").on("click","#savebutton",function(){n.params.inventoryAction=="save"?c():a()});$("body").on("click","#addinventory",function(){h()});$("body").on("click","#editbutton",function(){$this=$(this);w();$("#frmEditInventory #hdfEditProductID").val($this.data("product-id"));$("#frmEditInventory #EditProductCode").val($this.data("product-code"));$("#frmEditInventory #ProductName").val($this.data("product-name"));$("#frmEditInventory #ProductDesc").val($this.data("product-desc"));$("#frmEditInventory #ProductExtension").val($this.data("product-extension"));$("#frmEditInventory #ProductPrice").val($this.data("product-price"));$("#frmEditInventory #OriginalPrice").val($this.data("product-originalprice"));$("#frmEditInventory #Size").val($this.data("product-size"));$("#frmEditInventory #BarCode").val($this.data("product-barcode"));$("#frmEditInventory #EditProductCategory").data("kendoDropDownList").value($this.data("product-categoryid").toString());$("#frmEditInventory #EditProductBranch").data("kendoDropDownList").value($this.data("product-branchid").toString());$("#frmEditInventory #Remarks").val($this.data("product-remarks"));n.params.inventoryAction="update"});$("body").on("click","#refreshbutton",function(){l()});$("body").on("click","#searchbutton",function(){$("#mdlsearchproduct").modal("show")});$("body").on("click","#searchdetails",function(){i()});$("body").on("click","#addqtybutton",function(){$this=$(this);$("#hdfProductIdAddQty").val($this.data("product-id"));$("#mdladdqtyproduct").modal("show")});$("body").on("click","#voidqtybutton",function(){$this=$(this);$("#hdfProductIdVoidQty").val($this.data("product-id"));$("#frmVoidQtyProduct #hdfVoidCRType").val("");$("#lblCurrQty").text($this.data("product-qty"));$("#mdlvoidqtyproduct").modal("show")});$("body").on("click","#saveqtydetail",function(){v()});$("body").on("click","#editproductimage",function(){$this=$(this);$("#hdfProductIdEditProductImage").val($this.data("product-id"));b()});$("body").on("change","#frmUpdateProductImage #ProductImage",function(n){var i,r,t;if(i=n.target.files,i.length>0&&window.FormData!==undefined){for(r=new FormData,t=0;t<i.length;t++)r.append("file"+t,i[t]);k(r)}});$("body").on("shown.bs.modal","#mdlsearchproduct",function(){$(document).off("focusin.modal")});$("body").on("click","#removefilter",function(){$("#frmSearchProduct").deserialize(n.defaultSearchValue,!0,null)});$("body").on("shown.bs.modal","#mdladdqtyproduct",function(){$(document).off("focusin.modal")});$("body").on("hidden.bs.modal","#mdlvoidqtyproduct",function(){$("#lblCRType").text("Please select from (+) / (-)");n.defaultCRType="";$("#frmVoidQtyProduct").deserialize(n.defaultVoidQtyProduct,!0,null)});$("body").on("click","#refreshcategory",function(){$("#ProductCategory").kendoDropDownList({filter:"contains",optionLabel:"Select item",dataTextField:"CategoryDisplay",dataValueField:"CategoryID",dataSource:{transport:{read:{dataType:"json",url:n.params.categoryGetUrl}}}})});$("body").on("click","#refreshbranch",function(){$("#ProductBranch").kendoDropDownList({filter:"contains",optionLabel:"Select All",dataTextField:"BranchName",dataValueField:"BranchId",dataSource:{transport:{read:{dataType:"json",url:n.params.branchGetUrl}}}})});$("body").on("click","#editrefreshcategory",function(){$("#EditProductCategory").kendoDropDownList({filter:"contains",optionLabel:"Select item",dataTextField:"CategoryDisplay",dataValueField:"CategoryID",dataSource:{transport:{read:{dataType:"json",url:n.params.categoryGetUrl}}}})});$("body").on("click","#refreshsupplier",function(){$("#ProductSupplier").kendoDropDownList({filter:"contains",optionLabel:"Select item",dataTextField:"SupplierDisplay",dataValueField:"SupplierID",dataSource:{transport:{read:{dataType:"json",url:n.params.supplierGetUrl}}}})});$("body").on("click","#addqtyrefreshsupplier",function(){$("#AddQtyProductSupplier").kendoDropDownList({filter:"contains",optionLabel:"Select item",dataTextField:"SupplierDisplay",dataValueField:"SupplierID",dataSource:{transport:{read:{dataType:"json",url:n.params.supplierGetUrl}}}})});$("body").on("click","#voidqtyadd",function(){$("#VoidQuantity").val("0");$("#lblCRType").text("+");n.defaultCRType="+";$("#frmVoidQtyProduct #hdfVoidCRType").val(n.defaultCRType)});$("body").on("click","#voidqtyminus",function(){$("#VoidQuantity").val("0");$("#lblCRType").text("-");n.defaultCRType="-";$("#frmVoidQtyProduct #hdfVoidCRType").val(n.defaultCRType)});$("body").on("click","#voidqtydetail",function(){y()});$("body").on("click","#extractbutton",function(){$frmSearchInventoryReport=$("#frmSearchInventoryReport");window.open(n.params.extractToExcelUrl+"?"+$frmSearchInventoryReport.serialize())})},o=function(){$("#ProductCategory").kendoDropDownList({filter:"contains",optionLabel:"Select item",dataTextField:"CategoryDisplay",dataValueField:"CategoryID",dataSource:{transport:{read:{dataType:"json",url:n.params.categoryGetUrl}}}});$("#EditProductCategory").kendoDropDownList({filter:"contains",optionLabel:"Select item",dataTextField:"CategoryDisplay",dataValueField:"CategoryID",dataSource:{transport:{read:{dataType:"json",url:n.params.categoryGetUrl}}}});$("#SearchProductCategory").kendoDropDownList({filter:"contains",optionLabel:"Select All",dataTextField:"CategoryDisplay",dataValueField:"CategoryID",dataSource:{transport:{read:{dataType:"json",url:n.params.categoryGetUrl}}}});$("#ProductSupplier").kendoDropDownList({filter:"contains",optionLabel:"Select item",dataTextField:"SupplierDisplay",dataValueField:"SupplierID",dataSource:{transport:{read:{dataType:"json",url:n.params.supplierGetUrl}}}});$("#AddQtyProductSupplier").kendoDropDownList({filter:"contains",optionLabel:"Select item",dataTextField:"SupplierDisplay",dataValueField:"SupplierID",dataSource:{transport:{read:{dataType:"json",url:n.params.supplierGetUrl}}}});$("#SearchProductBranch").kendoDropDownList({filter:"contains",optionLabel:"Select All",dataTextField:"BranchName",dataValueField:"BranchId",dataSource:{transport:{read:{dataType:"json",url:n.params.branchGetUrl}}}});$("#ProductBranch").kendoDropDownList({filter:"contains",optionLabel:"Select item",dataTextField:"BranchName",dataValueField:"BranchId",dataSource:{transport:{read:{dataType:"json",url:n.params.branchGetUrl}}}});$("#EditProductBranch").kendoDropDownList({filter:"contains",optionLabel:"Select item",dataTextField:"BranchName",dataValueField:"BranchId",dataSource:{transport:{read:{dataType:"json",url:n.params.branchGetUrl}}}})},s=function(){var t=$("#gvProduct");t.kGridResizeHeight({height:n.gvProductHeight,willRefreshGrid:!0})},h=function(){$frmInventory=$("#frmInventory");var t,i=$("#tblProductOrder"),r;$.ajax({url:n.params.inventoryAddOrderUrl,type:"POST",data:$frmInventory.serialize(),success:function(n){n.isSuccess==!0&&(t=$("#ProductOrderRow tr").length,t===1&&(r=i.find("tbody > tr > td").first().find("span").text(),r===""&&($curRowToDelete=i.find("tbody > tr"),$curRowToDelete.remove())),$("#ProductOrderRow").append(n.inventory))}})},i=function(){var i=$("#gvProduct").data("kendoGrid"),u=$("#frmSearchProduct");r(n.loaderMsg);i.dataSource.read(u.serializeToJson());t();$("#mdlsearchproduct").modal("hide");INFRA.doRemoveOpenedModal()},g=function(){var a=$("#tblProductOrder"),t,i,r,u,f,e,o,s,h,c,l;a.find("tbody > tr").each(function(){t=$(this).find("td");i=t.eq(0).find("span").text();r=t.eq(1).find("span").text();u=t.eq(2).find("span").text();f=t.eq(3).find("span").text();e=t.eq(4).find("span").text();o=t.eq(5).find("span").text();productSize=t.eq(6).find("span").text();s=null;h=null;c=null;l=null;productRemarks=null;$.ajax({url:n.params.inventorySaveOrderUrl,type:"POST",data:{productCode:i,productName:r,productDesc:u,productExtension:f,quantity:e,price:o,size:productSize,unitId:s,categoryId:h,modelId:c,supplierId:l,remarks:productRemarks},success:function(n){alert(n.isSuccess)}})})},c=function(){var e=$("#frmInventory"),o=$("#frmInventory #ProductCategory"),s=$("#frmInventory #ProductSupplier"),h=$("#frmInventory #ProductBranch"),c=$("#frmInventory #hdfUserTypeId"),f;r(n.loaderMsg);f=!0;$.validator.unobtrusive.parse(e);e.validate();e.valid()?INFRA.ConvertToBoolean(f)?$.ajax({url:n.params.invetnorySaveProductAndPurchaseOrderUrl,type:"POST",data:e.serialize(),success:function(n){t();INFRA.ConvertToBoolean(n.isSuccess)&&(i(),u());$("#divResultContainer").show().html(n.alertMessage)}}):t():(INFRA.IsNullOrEmpty(o.val())?(f=!1,$('#frmInventory [data-valmsg-for="CategoryID"]').html("<br/>Category field is a required field")):(f=!0,$('#frmInventory [data-valmsg-for="CategoryID"]').html("")),INFRA.IsNullOrEmpty(s.val())?(f=!1,$('#frmInventory [data-valmsg-for="SupplierID"]').html("<br/>Supplier field is a required field")):(f=!0,$('#frmInventory [data-valmsg-for="SupplierID"]').html("")),INFRA.ConvertToInteger(c.val())===1&&(INFRA.IsNullOrEmpty(h.val())?(f=!1,$('#frmInventory [data-valmsg-for="BranchID"]').html("<br/>Branch field is a required field")):(f=!0,$('#frmInventory [data-valmsg-for="BranchID"]').html(""))),t())},l=function(){i()},a=function(){var e=$("#frmEditInventory"),o=$("#EditProductCategory"),s=$("#editHdfUserTypeId"),h=$("#EditProductBranch"),f=!0;r(n.loaderMsg);$.validator.unobtrusive.parse(e);e.validate();e.valid()?(INFRA.IsNullOrEmpty(o.val())?(f=!1,$('#frmEditInventory [data-valmsg-for="CategoryID"]').html("<br/>Category field is a required field")):(f=!0,$('#frmEditInventory [data-valmsg-for="CategoryID"]').html("")),INFRA.ConvertToBoolean(f)&&INFRA.ConvertToInteger(s.val())===1&&(INFRA.IsNullOrEmpty(h.val())?(f=!1,$('#frmEditInventory [data-valmsg-for="BranchID"]').html("<br/>Branch field is a required field")):(f=!0,$('#frmEditInventory [data-valmsg-for="BranchID"]').html(""))),INFRA.ConvertToBoolean(f)?$.ajax({url:n.params.inventoryUpdateProductDetailsUrl,type:"POST",data:e.serialize(),success:function(n){t();INFRA.ConvertToBoolean(n.isSuccess)&&(i(),u());$("#divResultContainer").show().html(n.alertMessage)}}):t()):t()},v=function(){var t=$("#frmAddQtyProduct"),u=$("#frmAddQtyProduct #AddQtyProductSupplier"),r=!0;$.validator.unobtrusive.parse(t);t.validate();t.valid()&&(INFRA.IsNullOrEmpty(u.val())?(r=!1,$('#frmAddQtyProduct [data-valmsg-for="SupplierID"]').html("<br/>Supplier field is a required field")):(r=!0,$('#frmAddQtyProduct [data-valmsg-for="SupplierID"]').html("")),INFRA.ConvertToBoolean(r)&&$.ajax({url:n.params.inventoryAddProductUrl,type:"POST",data:t.serialize(),success:function(n){INFRA.ConvertToBoolean(n.isSuccess)&&(i(),$("#mdladdqtyproduct").modal("hide"),INFRA.doRemoveOpenedModal(),$("#frmAddQtyProduct #AddQuantity").val("0"),$("#frmAddQtyProduct #AddQtyProductSupplier").data("kendoDropDownList").value(null));$("#divResultContainer").show().html(n.alertMessage)}}))},y=function(){var r=$("#frmVoidQtyProduct"),u=$("#frmVoidQtyProduct #VoidRemarks"),f=$("#frmVoidQtyProduct #hdfVoidCRType"),t=!0;$.validator.unobtrusive.parse(r);r.validate();r.valid()?(INFRA.IsNullOrEmpty(u.val())?(t=!1,$('#frmVoidQtyProduct [data-valmsg-for="Remarks"]').html("<br/>Remarks field is a required field")):(t=!0,$('#frmVoidQtyProduct [data-valmsg-for="Remarks"]').html("")),INFRA.ConvertToBoolean(t)&&(INFRA.IsNullOrEmpty(f.val())?(t=!1,$('#frmVoidQtyProduct [data-valmsg-for="Quantity"]').html("<br/>Please select from (+)/(-) field is a required field")):(t=!0,$('#frmVoidQtyProduct [data-valmsg-for="Quantity"]').html(""))),INFRA.ConvertToBoolean(t)&&$.ajax({url:n.params.inventoryVoidProductUrl,type:"POST",data:r.serialize(),success:function(t){INFRA.ConvertToBoolean(t.isSuccess)&&(i(),$("#mdlvoidqtyproduct").modal("hide"),INFRA.doRemoveOpenedModal(),$("#frmVoidQtyProduct").deserialize(n.defaultVoidQtyProduct,!0,null));$("#divResultContainer").show().html(t.alertMessage)}})):INFRA.IsNullOrEmpty(u.val())?(t=!1,$('#frmVoidQtyProduct [data-valmsg-for="Remarks"]').html("<br/>Remarks field is a required field")):(t=!0,$('#frmVoidQtyProduct [data-valmsg-for="Remarks"]').html(""))},u=function(){$("#divInventory").show();$("#inventory-form").hide();$("#inventory-update-form").hide();$("#inventory-form-update-image").hide();$("#searchbutton").show();$("#refreshbutton").show();$("#newbutton").show();$("#extractbutton").show();$("#discardbutton").hide();$("#savebutton").hide();f()},f=function(){$("#frmInventory").deserialize(n.defaultValue,!0,null);$("#frmEditInventory").deserialize(n.defaultEditValue,!0,null)},p=function(){$("#divInventory").hide();$("#inventory-form").show();$("#searchbutton").hide();$("#refreshbutton").hide();$("#newbutton").hide();$("#extractbutton").hide();$("#discardbutton").show();$("#savebutton").show()},w=function(){$("#divInventory").hide();$("#inventory-update-form").show();$("#searchbutton").hide();$("#refreshbutton").hide();$("#newbutton").hide();$("#extractbutton").hide();$("#discardbutton").show();$("#savebutton").show()},b=function(){$("#divInventory").hide();$("#inventory-form-update-image").show();$("#searchbutton").hide();$("#refreshbutton").hide();$("#newbutton").hide();$("#discardbutton").show();$("#extractbutton").hide()},k=function(){var f=$("#frmUpdateProductImage"),e=new FormData(f[0]);r(n.loaderMsg);$.ajax({type:"POST",url:f.data("url"),data:e,processData:!1,contentType:!1,success:function(n){t();INFRA.ConvertToBoolean(n.isSuccess)?($("#frmUpdateProductImage #ProductImage").val(""),$("#divResultContainer").show().html(n.alertMessage),i(),u()):$('#frmUpdateProductImage [data-valmsg-for="ProductImage"]').html("<br/>"+n.alertMessage)}})},d=function(t){try{n.params=t||{}}catch(i){typeof console!="undefined"&&console!==null&&console.error("Error parsing inline options",i)}n.defaultValue=$("#frmInventory").serialize();n.defaultEditValue=$("#frmEditInventory").serialize();n.defaultSearchValue=$("#frmSearchProduct").serialize();n.defaultVoidQtyProduct=$("#frmVoidQtyProduct").serialize();o();e();s()};return{initialize:d,_variables:n}}();$(document).ready(function(){var n=window.inventoryOptions;ORDERMANAGEMENTPURCHASEORDER.initialize(n);$(window).resize(function(){$("#gvProduct").kGridResizeHeight({height:ORDERMANAGEMENTPURCHASEORDER._variables.gvProductHeight,willRefreshGrid:!1,isManual:!0})})});
//# sourceMappingURL=ordermanagement-purchaseorder.min.js.map
