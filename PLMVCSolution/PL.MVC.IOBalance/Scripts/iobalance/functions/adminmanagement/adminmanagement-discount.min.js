var ADMINMANAGEMENTDISCOUNT=function(){var n={params:null,gvDiscountHeight:200,loaderMsg:"Please wait while we process your request",defaultValue:null,defaultEditValue:null,defaultSearchValue:null},r=function(n){$("body").showLoader({type:"page",message:n})},t=function(){$("body").hideLoader()},f=function(){var t=$("#gvDiscount");t.kGridResizeHeight({height:n.gvDiscountHeight,willRefreshGrid:!1,isManual:!0})},e=function(){var s=$("#frmDiscount").serialize(),h=n.params.saveUrl,e=$("#frmDiscount"),f=!0,c=$("#frmDiscount #BranchID"),o=$("#frmDiscount #DiscountPercentage");r(n.loaderMsg);$.validator.unobtrusive.parse(e);e.validate();e.valid()?(INFRA.IsNullOrEmpty(c.val())?(f=!1,$('#frmDiscount [data-valmsg-for="BranchID"]').html("<br/>Branch field is a required field")):(f=!0,$('#frmDiscount [data-valmsg-for="BranchID"]').html("")),INFRA.ConvertToBoolean(f)&&(INFRA.IsNullOrEmpty(o.val())||(INFRA.ConvertToInteger(o.val())<=0?(f=!1,$('#frmDiscount [data-valmsg-for="DiscountPercentage"]').html("<br/>Discount should not be less than or equal to 0")):(f=!0,$('#frmDiscount [data-valmsg-for="DiscountPercentage"]').html("")))),INFRA.ConvertToBoolean(f)?$.ajax({url:h,type:"POST",data:s,success:function(n){t();$("#divResultContainer").show().html(n.alertMessage);INFRA.ConvertToBoolean(n.isSuccess)&&(i(),u())}}):t()):t()},o=function(){var o=$("#frmEditDiscount").serialize(),s=n.params.updateUrl,f=$("#frmEditDiscount"),u=!0,h=$("#frmEditDiscount #EditBranchID"),e=$("#frmEditDiscount #EditDiscountPercentage");r(n.loaderMsg);$.validator.unobtrusive.parse(f);f.validate();f.valid()?(INFRA.IsNullOrEmpty(h.val())?(u=!1,$('#frmEditDiscount [data-valmsg-for="BranchID"]').html("<br/>Branch field is a required field")):(u=!0,$('#frmEditDiscount [data-valmsg-for="BranchID"]').html("")),INFRA.ConvertToBoolean(u)&&(INFRA.IsNullOrEmpty(e.val())?(u=!1,$('#frmEditDiscount [data-valmsg-for="DiscountPercentage"]').html("<br/>The Discount Percentage is a requried field.")):INFRA.ConvertToInteger(e.val())<=0?(u=!1,$('#frmEditDiscount [data-valmsg-for="DiscountPercentage"]').html("<br/>Discount should not be less than or equal to 0")):(u=!0,$('#frmEditDiscount [data-valmsg-for="DiscountPercentage"]').html(""))),INFRA.ConvertToBoolean(u)?$.ajax({url:s,type:"POST",data:o,success:function(r){t();$("#divResultContainer").show().html(r.alertMessage);INFRA.ConvertToBoolean(r.isSuccess)&&(i(),$("#frmEditDiscount").deserialize(n.defaultEditValue,!0,null),$("#mdleditdiscount").modal("hide"),INFRA.doRemoveOpenedModal())}}):t()):t()},s=function(t,r){$.ajax({url:n.params.deleteUrl,type:"POST",data:{discountId:INFRA.ConvertToInteger(t),branchId:INFRA.ConvertToInteger(r)},success:function(n){$("#divResultContainer").show().html(n.alertMessage);INFRA.ConvertToBoolean(n.isSuccess)&&i()}})},i=function(){var i=$("#gvDiscount").data("kendoGrid"),u=$("#frmSearchDiscount");r(n.loaderMsg);i.dataSource.read(u.serializeToJson());t();$("#mdlsearchdiscount").modal("hide");INFRA.doRemoveOpenedModal()},u=function(){$("#discount-new-form").hide();$("#divDiscount").show();$("#searchbutton").show();$("#refreshbutton").show();$("#btnnewform").show();$("#btndiscard").hide();$("#frmDiscount").deserialize(n.defaultValue,!0,null);$("#frmEditDiscount").deserialize(n.defaultEditValue,!0,null)},h=function(){$("#discount-new-form").show();$("#divDiscount").hide();$("#searchbutton").hide();$("#refreshbutton").hide();$("#btnnewform").hide();$("#btndiscard").show()},c=function(){$("body").on("click","#searchdetails",function(){i()});$("body").on("click","#refreshbutton",function(){i()});$("body").on("click","#btnnewform",function(){h()});$("body").on("click","#btndiscard",function(){u()});$("body").on("click","#savedetails",function(){e()});$("body").on("click","#updatedetails",function(){o()});$("body").on("click","#updateactive",function(){var n=$(this);$.alertWindow("Are you sure you want to inactive this record?",function(){s(n.data("discount-id"),n.data("branch-id"))},function(){})});$("body").on("click","#edititem",function(){$this=$(this);$("#mdleditdiscount").modal("show")});$("body").on("shown.bs.modal","#mdleditdiscount",function(){$(document).off("focusin.modal");$("#hdfDiscountId").val($this.data("discount-id"));$("#EditDiscountPercentage").val($this.data("discount-percentage"));$("#EditBranchID").data("kendoDropDownList").value($this.data("discount-branchid"))});$("body").on("shown.bs.modal","#mdlsearchdiscount",function(){$(document).off("focusin.modal")});$("body").on("click","#removefilter",function(){$("#frmSearchDiscount").deserialize(n.defaultSearchValue,!0,null)});$("body").on("hidden.bs.modal","#mdleditdiscount",function(){$("#frmEditDiscount").deserialize(n.defaultEditValue,!0,null)})},l=function(){$("#SearchProductBranch").kendoDropDownList({filter:"contains",optionLabel:"Select All",dataTextField:"BranchName",dataValueField:"BranchId",dataSource:{transport:{read:{dataType:"json",url:n.params.branchGetUrl}}}});$("#BranchID").kendoDropDownList({filter:"contains",optionLabel:"Select One",dataTextField:"BranchName",dataValueField:"BranchId",dataSource:{transport:{read:{dataType:"json",url:n.params.branchGetUrl}}}});$("#EditBranchID").kendoDropDownList({filter:"contains",optionLabel:"Select One",dataTextField:"BranchName",dataValueField:"BranchId",dataSource:{transport:{read:{dataType:"json",url:n.params.branchGetUrl}}}})},a=function(t){try{n.params=t||{};l();c();f()}catch(i){typeof console!="undefined"&&console!==null&&console.error("Error parsing inline options",i)}n.defaultValue=$("#frmDiscount").serialize();n.defaultEditValue=$("#frmEditDiscount").serialize();n.defaultSearchValue=$("#frmSearchDiscount").serialize()};return{initialize:a,_variables:n}}();$(document).ready(function(){var n=window.discountOptions;ADMINMANAGEMENTDISCOUNT.initialize(n);$(window).resize(function(){$("#gvDiscount").kGridResizeHeight({height:ADMINMANAGEMENTDISCOUNT._variables.gvDiscountHeight,willRefreshGrid:!1,isManual:!0})})});
//# sourceMappingURL=adminmanagement-discount.min.js.map
